{% extends "base.html" %}

{% block title %}Snippet Note | Add Snippet{% end %}

{% block scripts %}
<script src="{{ static_url('scripts/ace/ace.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-c_cpp.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-clojure.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-coffee.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-csharp.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-css.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-golang.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-html.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-java.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-javascript.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-latex.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-lua.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-ocaml.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-perl.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-php.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-python.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-ruby.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-scala.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-sh.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-sql.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-text.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-xml.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-xquery.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/mode-yaml.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/theme-twilight.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/ace/theme-textmate.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="{{ static_url('scripts/snippet.js') }}" type="text/javascript" charset="utf-8"></script>
{% end %}

{% block body %}
{% if snippet %}
    {% set title = snippet['title'] %}
    {% set description = snippet['description'] %}
    {% set language = snippet['language'] %}
    {% set code = snippet['snippet'] %}
    {% set action_url = "/snippet/%s" % snippet["_id"] %}
{% else %}
    {% set title, description, language, code = None, None, None, None %}
    {% set action_url = "/snippet" %}
{% end %}
<form action="{{ action_url }}" method="POST" class="well">
    <fieldset>
        {% raw xsrf_form_html() %}
        <div class="input-append" style="width: 600px;">
            <input name="title" type="text" placeholder="Title for this snippet"
                {% if title %}value="{{ title }}"{% end %}/><span class="add-on">Title</span>
            <select id="language-selector" class="span2" name="language">
                {% from languages import languages %}
                {% for name, extension in sorted(languages.items()) %}
                    {% if language %}
                    <option value="{{ name }}" {% if name == language %}selected="selected"{% end %}>
                            {{ name }}</option>
                    {% else %}
                    <option value="{{ name }}" {% if extension == "misc" %}selected="selected"{% end %}>
                            {{ name }}</option>
                    {% end %}
                {% end %}
            </select>
        </div>
        <div class="input-append" style="width: 600px;">
            <input name="description" type="text" class="span5" 
                placeholder="Description of this snippet" 
                {% if description %}value="{{ description }}"{% end %}/><span 
                class="add-on">Description</span>
        </div>
        <div id="editor">{% if code %}{{ code }}{% end %}</div>
        <textarea id="snippet-data" name="snippet" style="display:none;">
            {% if code %}{{ code }}{% end %}
        </textarea>
        <div class="form-actions">
            {% if snippet %}
            <button type="submit" class="btn btn-success">Save Snippet</button>
            {% else %}
            <button type="submit" class="btn btn-success">Create Public Snippet</button>
            <button type="submit" class="btn btn-success" name="private" value="private">Create Private Snippet</button>
            {% end %}
        </div>
    </fieldset>
</form>
{% end %}
